<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: AnimManager.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: AnimManager.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** Used internally by AnimManager to manage individual animations
 * @param {array} frames - an array of frame objects {x,y} denoting position of frames in a spritesheet
 * @param {number} rate - framerate in milliseconds per frame
 */
class Anim {  
    constructor(frames, rate) {
        this.frames = frames;
        this.rate = rate;
        this.reset();
    }
/** Used internally by AnimManager to update currently playing animation
 * @param {number} dt - time elapsed since previous frame
 */
    update(dt){
        const { rate, frames } = this;
        if((this.curTime += dt) > rate) {
            this.curFrame++
            this.frame = frames[this.curFrame % frames.length];
            this.curTime -= rate;
        }
    }
/** Used internally by AnimManager to reset the animation */
    reset() {
        this.frame = this.frames[0];
        this.curFrame = 0;
        this.curTime = 0;
    }
}
 /** Manages animations for an animated sprite */
class AnimManager {
     /** add an animation to the animation manager
     * @constructor
     * @param {object} e the object you're adding an animation manager to
     */
    constructor(e) {
        this.anims = {};
        this.running = false;
        this.frameSource = e.frame || e;
        this.current = null;
    }
    /** add an animation to the animation manager
     * @param {string} name  - Name of the animation
     * @param {array} frames - an array of frame objects {x,y} denoting position of frames in a spritesheet
     * @param {number} speed - framerate in milliseconds per frame
     */
    add(name, frames, speed) {
        this.anims[name] = new Anim(frames, speed);
        return this.anims[name];
    }
    /** updates the currently playing animation
     * @param {number} dt - time elapsed since previous frame
    */
    update(dt){
        const{current, anims, frameSource} = this;
        if(!current){
            return;
        }
        const anim = anims[current];
        anim.update(dt);
        frameSource.x = anim.frame.x;
        frameSource.y = anim.frame.y;
    }
    /** plays a named animation already added to the animation manager
     * if the animation passed in is already playing, it will continue playing.
     * if different, the current animation is stopped and the new animation starts from the beginning of it's cycle
     * @param {string} anim  - Name of the animation
     */
    play(anim){
        const {current, anims} = this;
        if(anim == current){
            return;
        }
        this.current = anim;
        anims[anim].reset();
    }
    /**
     * Stops the current animation, will leave the last frame played displayed
     */
    stop(){
        this.current = null;
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Anim.html">Anim</a></li><li><a href="AnimManager.html">AnimManager</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Jan 19 2019 08:49:25 GMT-0600 (GMT-06:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
